<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spectator View</title>
    <script src="/socket.io/socket.io.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #000; /* Dark background */
            color: #fff; /* White text */
            margin: 0;
            padding: 0;
            display: flex;
        }

        /* Left Section: Waveforms */
        .waveforms {
            flex: 3;
            padding: 20px;
        }

        .wave {
            position: relative;
            height: 120px;
            margin-bottom: 20px;
        }

        .wave canvas {
            width: 100%;
            height: 100%;
            background-color: #111; /* Darker background for waveforms */
            border-radius: 5px;
        }

        .wave-label {
            position: absolute;
            top: -25px;
            left: 10px;
            font-size: 16px;
            font-weight: bold;
        }

        /* Right Section: Numerical Values */
        .parameters {
            flex: 1;
            background-color: #111; /* Sidebar background */
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .parameter {
            text-align: center;
            margin-bottom: 40px;
        }

        .parameter h2 {
            font-size: 24px;
            color: #00ffff; /* Cyan for labels */
        }

        .value {
            font-size: 48px;
            font-weight: bold;
        }

        .unit {
            font-size: 24px;
            color: #888; /* Light gray for units */
        }
    </style>
</head>
<body>
    <!-- Left Section -->
    <div class="waveforms">
        
        <!-- Heart Rate Wave -->
        <div class="wave" id="heartRateWave">
            <canvas></canvas>
            <span class="wave-label" style="color:#00ff00;">Heart Rate</span>
        </div>

        <!-- Blood Pressure Wave -->
        <div class="wave" id="bloodPressureWave">
            <canvas></canvas>
            <span class="wave-label" style="color:#ffcc00;">Blood Pressure</span>
        </div>

        <!-- GSR Wave -->
        <div class="wave" id="gsrWave">
            <canvas></canvas>
            <span class="wave-label" style="color:#00ffff;">GSR</span>
        </div>

    </div>

    <!-- Right Section -->
    <div class="parameters">
        
        <!-- Heart Rate -->
        <div class="parameter">
            <h2>Heart Rate</h2>
            <div class="value">
                <span id="heartRate">--</span> 
                <span class="unit">bpm</span>
            </div>
        </div>

        <!-- Blood Pressure -->
        <div class="parameter">
            <h2>Blood Pressure</h2>
            <div class="value">
                <span id="bloodPressure">--</span> 
                <span class="unit">mmHg</span>
            </div>
        </div>

        <!-- GSR -->
        <div class="parameter">
            <h2>GSR</h2>
            <div class="value">
                <span id="gsr">--</span> 
                <span class="unit">Î¼S</span>
            </div>
        </div>

    </div>

    <!-- JavaScript for Dynamic Updates -->
    <script>
      const socket = io();

      const elements = {
          heartRate: document.getElementById('heartRate'),
          bloodPressure: document.getElementById('bloodPressure'),
          gsr: document.getElementById('gsr')
      };

      // Simulate waveforms
      function createWave(canvasId, color) {
          const canvas = document.querySelector(`#${canvasId} canvas`);
          const ctx = canvas.getContext('2d');
          canvas.width = canvas.offsetWidth;
          canvas.height = canvas.offsetHeight;

          let t = 0;

          function draw() {
              ctx.clearRect(0, 0, canvas.width, canvas.height);
              ctx.beginPath();
              ctx.strokeStyle = color;

              for (let x = 0; x <= canvas.width; x++) {
                  const y =
                      canvas.height / 2 +
                      Math.sin((x + t) * 0.05) * (canvas.height / 4);
                  x === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
              }

              ctx.stroke();
              t += 2;

              requestAnimationFrame(draw);
          }

          draw();
      }

      createWave("heartRateWave", "#00ff00");
      createWave("bloodPressureWave", "#ffcc00");
      createWave("gsrWave", "#00ffff");

      // Update numerical values dynamically
      socket.on("updateValues", (data) => {
          if (data.heartRate)
              elements.heartRate.textContent = data.heartRate;

          if (data.bloodPressure)
              elements.bloodPressure.textContent = data.bloodPressure;

          if (data.gsr)
              elements.gsr.textContent = data.gsr;
      });
    </script>
</body>
</html>
